/**
 * Copyright MARS FLAG Corporation. All rights reserved.
 *
 * http://www.marsflag.com/
 * 2017.12.14 rei
 */
function initJSONPSuggest(e,t){function n(n){function o(){U.css("visibility","visible")}function N(){U.css("visibility","hidden")}function B(e,t){if(!arguments.length){var n=V.getElementsByTagName("UL")[0];e=n.offsetWidth,t=n.offsetHeight,A&&(e+=3,t++)}z.className="suggest_frame active",z.style.height=t+"px",z.style.position="block"}function H(){return"visible"==U.css("visibility")}function K(e){return V.getElementById(e)}function L(){var e=p[0];YAHOO.util.Dom.getXY(e),z.style.width=e.offsetWidth+"px"}function P(e){if(ee=!1,!e||0==e.length){if(!b)return;ee=!0}if(x)for(var t=0;t<e.length;t++)e[t].word=e[t].word.toUpperCase();if(L(),p.val()){var n={prefix:re,handler:oe,data:e};ee&&(n.data=[{word:b,point:-1}]);try{i[g](n,se),setTimeout(B,0),ue=e,de=-1,o()}catch(e){R&&u(a(e))}}}function W(e){if(e.match(/^\s*$/))return!1;var n=["q="+encodeURIComponent(e),"ie=utf8","max="+y,"callback=?"];C&&(n=n.concat("ct="+encodeURIComponent(C))),S&&(n=n.concat("ctk="+encodeURIComponent(S))),_&&(n=n.concat(_));var a=f+"?"+n.join("&");t.getJSON(a,P)}function D(e){if(e!=s&&(q(),de=e),ue[de]){var t=K(re+de);t.style.textDecoration="none",t.style.color="#eb0a1e"}}function q(){ue[de]&&(K(re+de).style.color="#000")}function F(){de<0?de=0:(q(),de++),de>=5?de=-1:D()}function $(){if(de<0)de=4;else if(q(),-1==--de)return;D()}function G(){var e=ue[de];return e&&p.val()!=e.word?(p.val(e.word),le=e.word,p[0].form.submit(),0):1}function J(e){var t=e.keyCode;return ge=e.shiftKey,13==t&&-1!=de?0:ye[t]?0:1}function Y(){var e=p.val();le!=e&&(le=e,""==e?(ue=[],N()):W(e))}function Q(){me||(me=c(Y,100))}function X(){me&&(l(me),me=null)}if(!r)try{if((n=n||i.event)&&"readystatechange"==n.type&&"complete"!=this.readyState)return;j&&l(j),r=!0,z.onload=z.onreadystatechange=null;var V=(z.contentWindow||i.frames[v]).document,Z=V.body,ee=!1,te=h.join("")+(w?"":".suggest_data_graph {display:none}");if(M||O){if(Z.innerHTML="",h){var ne=V.createElement("style");ne.type="text/css",O&&ne.styleSheet?ne.styleSheet.cssText=te:ne.innerHTML=te,Z.appendChild(ne)}(se=V.createElement("div")).id=k,Z.appendChild(se),E&&(Z.className+=" rtl")}else{h&&V.write('<style type="text/css">\x3c!-- '+te+"--\x3e</style>");var ae="";switch(e.type){case 1:ae="";break;case 2:ae="jp";break;case 3:ae="lexus";break;case 4:ae="lexus jp"}V.write('<body class="'+ae+'"><div id="'+k+'"></div></body>'),V.close();var se=V.getElementById(k)}!function(){var e=p.css("font-size"),t=p.css("font-family"),n=p.css("height"),a=V.styleSheets&&V.styleSheets[0];a.addRule?(a.addRule("body *","font-size:"+e+" !important"),a.addRule("body *","font-family:"+t+" !important"),a.addRule("#suggest_area td","height:"+n+" !important")):(a.insertRule("body * {font-size:"+e+"}",a.cssRules.length),a.insertRule("body * {font-family:"+t+"}",a.cssRules.length),a.insertRule("#suggest_area td {height:"+n+" !important}",a.cssRules.length))}(),se.onselectstart=se.oncontextmenu=function(){return!1};var re="suggest_data_",ie=m.replace(/^[^.]*\.(.*)$/,"$1"),oe="parent."+I+"."+ie;T[ie]||(T[ie]={});var ce=i.onresize;i.onresize=function(){L(),ce&&ce()};var le=p.val(),ue=[],de=-1;T[ie].focus=D;var fe;T[ie].suggest_mousedown=function(e){ee||(fe=(new Date).getTime())},T[ie].suggest_click=function(e){return!ee&&(G()?void p[0].form.submit():(p[0].focus(),!1))};var ge,me,ye={9:1,16:1,17:1,27:1,18:1,19:1,20:1,33:1,34:1,35:1,36:1,37:1,38:1,40:1,44:1,45:1};i.opera||d.indexOf("Gecko")>=0&&-1==d.indexOf("KHTML")?p.keypress(function(e){J(e)&&Q()}):p.keyup(function(e){J(e)&&Y()}),p.keydown(function(e){var t=e.keyCode;switch(ge=e.shiftKey,t){case 9:if(!H())return!0;ge?$():F();break;case 40:F();break;case 38:$();break;case 27:N();break;case 13:if(!G())break;default:return}return!1}).blur(function(e){var t=(new Date).getTime();fe+100>t||(X(),N())}).focus(function(e){(0!=ue.length||ee)&&o()})}catch(n){R&&u(a(n))}}function a(e){var t,n=[];for(t in e)n[n.length]=t+" :\t"+e[t];return n.join("\n")}var s,r,i=window,o=i.document,c=(o&&o.getElementsByTagName,i.setInterval),l=i.clearInterval,u=window.alert,d=navigator.userAgent,f=e.interface_url||"suggest.x",g=e.tmpl_func||"MF_suggest_tmpl",m=e.handler_name||"parent.suggest_ctxt",y=(e.callback,e.selected_bgcolor,e.max||10),h=e.array_styles||[],p=e.input_jquery,v=e.suggest_frame||"suggest_frame",b=e.no_result_mess||"",_=e.array_queries,w=e.show_data_graph,k="suggest_area",x=e.to_upper,R=e.debug,E=e.rtl,S=e.ctk||"",C=e.ct||"",I="GALFSRAM",T=i[I]||{};i[I]=T,t=t||i.jQuery;var j,A=d.match(/AppleWebKit\/4\d\d/),M=d.match(/Opera/),O=d.match(/MSIE/),N=d.match(/MSIE 6/);d.match(/trident/i)&&(O=!0),d.match(/(iPhone|iPad|iPod|Android|dream|CUPCAKE|blackberry|webOS|incognito|webmate)/);var B=N?"javascript:false;":"about:blank";if("string"==typeof p&&(p=t(p)),p&&p[0]){p.attr("autocomplete","off");var U=t("#"+v),z=U.get(0),H=!1;0==U.length&&(z=o.createElement("IFRAME"),U=t(z),H=!0),z.name=z.id=v,z.frameBorder=0,z.scrolling="no",U.css({position:"absolute",height:"0px",width:p[0].offsetWidth+"px"}),H||U.css("display","block");var K=document.getElementsByClassName("search_keyword");H?t(K).append(z):U.prependTo(t(K)),M||O||(z.onload=z.onreadystatechange=n,z.src=B),(A||M||O)&&(j=c(n,100))}}
